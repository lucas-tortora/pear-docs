"use strict";(globalThis.webpackChunkpear_docs_docusarus=globalThis.webpackChunkpear_docs_docusarus||[]).push([[4776],{8453:(e,r,i)=>{i.d(r,{R:()=>o,x:()=>a});var n=i(6540);const t={},s=n.createContext(t);function o(e){const r=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(s.Provider,{value:r},e.children)}},8868:(e,r,i)=>{i.r(r),i.d(r,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"about-pear/architecture/building-blocks","title":"Building Blocks","description":"The essential building blocks for building powerful P2P applications using Pear.","source":"@site/docs/about-pear/architecture/building-blocks.md","sourceDirName":"about-pear/architecture","slug":"/about-pear/architecture/building-blocks","permalink":"/pear-docs/about-pear/architecture/building-blocks","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/about-pear/architecture/building-blocks.md","tags":[],"version":"current","frontMatter":{},"sidebar":"sidebar","previous":{"title":"Pear Architecture","permalink":"/pear-docs/about-pear/architecture/"},"next":{"title":"Helpers","permalink":"/pear-docs/about-pear/architecture/helpers"}}');var t=i(4848),s=i(8453);const o={},a="Building Blocks",l={},c=[{value:"Hypercore",id:"hypercore",level:2},{value:"Hyperbee",id:"hyperbee",level:2},{value:"Hyperdrive",id:"hyperdrive",level:2},{value:"Autobase",id:"autobase",level:2},{value:"HyperDHT",id:"hyperdht",level:2},{value:"Hyperswarm",id:"hyperswarm",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"building-blocks",children:"Building Blocks"})}),"\n",(0,t.jsxs)(r.p,{children:["The essential building blocks for building powerful P2P applications using ",(0,t.jsx)(r.a,{href:"#pear-runtime",children:"Pear"}),"."]}),"\n",(0,t.jsx)(r.admonition,{title:"References",type:"info",children:(0,t.jsxs)(r.p,{children:["You can find implementation, usage and API details in the ",(0,t.jsx)(r.a,{href:"../references/building-blocks/overview.mdx",children:"Building Blocks References"})," section."]})}),"\n",(0,t.jsx)(r.h2,{id:"hypercore",children:"Hypercore"}),"\n",(0,t.jsx)(r.p,{children:"Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications."}),"\n",(0,t.jsx)(r.p,{children:"Notable features include:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Improved fork detection in the replication protocol, to improve resilience."}),"\n",(0,t.jsx)(r.li,{children:"Optional on-disk encryption for blocks (in addition to the existing transport encryption)."}),"\n",(0,t.jsx)(r.li,{children:"A write-ahead log in the storage layer to ensure that power loss or unexpected shutdown cannot lead to data corruption."}),"\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.a,{href:"../references/building-blocks/hypercore.md#core.session-options",children:(0,t.jsx)(r.code,{children:"session"})})," and ",(0,t.jsx)(r.a,{href:"../references/building-blocks/hypercore.md#core.snapshot-options",children:(0,t.jsx)(r.code,{children:"snapshot"})})," methods for providing multiple views over the same underlying Hypercore, which simplifies resource management."]}),"\n",(0,t.jsxs)(r.li,{children:["A ",(0,t.jsx)(r.a,{href:"../references/building-blocks/hypercore.md#await-core.truncate-newlength-forkid",children:(0,t.jsx)(r.code,{children:"truncate"})})," method for intentionally creating a new fork, starting at a given length. We use this method extensively in ",(0,t.jsx)(r.a,{href:"../references/building-blocks/autobase.md",children:(0,t.jsx)(r.code,{children:"autobase"})}),"."]}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{title:"How To Use",type:"tip",children:(0,t.jsxs)(r.p,{children:["Learn ",(0,t.jsx)(r.a,{href:"../how-to/replicate-and-persist-data/replicate-and-persist-with-hyper-core.md",children:"how to replicate and persist data with Hypercore"}),"."]})}),"\n",(0,t.jsx)(r.h2,{id:"hyperbee",children:"Hyperbee"}),"\n",(0,t.jsxs)(r.p,{children:["Hyperbee is an append only B-tree based on ",(0,t.jsx)(r.a,{href:"#hypercore",children:(0,t.jsx)(r.code,{children:"Hypercore"})}),". It provides a key/value-store API, with methods for inserting and getting key-value pairs, atomic batch insertions, and creating sorted iterators. It uses a single Hypercore for storage, using a technique called embedded indexing. It provides features like cache warmup extension, efficient diffing, version control, sorted iteration, and sparse downloading."]}),"\n",(0,t.jsx)(r.admonition,{title:"Single Writer",type:"info",children:(0,t.jsxs)(r.p,{children:["As with the Hypercore, a Hyperbee can only have a ",(0,t.jsx)(r.strong,{children:"single writer on a single machine"}),"; the creator of the Hyperdrive is the only person who can modify it as they're the only one with the private key. That said, the writer can replicate to ",(0,t.jsx)(r.strong,{children:"many readers"}),", in a manner similar to BitTorrent."]})}),"\n",(0,t.jsx)(r.admonition,{title:"How To Use",type:"tip",children:(0,t.jsxs)(r.p,{children:["Learn ",(0,t.jsx)(r.a,{href:"../how-to/replicate-and-persist-data/share-append-only-databases-with-hyperbee.md",children:"how to share append only databases with Hyperbee"}),"."]})}),"\n",(0,t.jsx)(r.h2,{id:"hyperdrive",children:"Hyperdrive"}),"\n",(0,t.jsx)(r.p,{children:"Hyperdrive is a secure, real-time distributed file system designed for easy P2P file sharing. We use it extensively inside Holepunch; apps like Keet are distributed to users as Hyperdrives, as is the Holepunch platform itself."}),"\n",(0,t.jsx)(r.p,{children:"Notable features include:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Uses Hyperbee internally for storing file metadata"}),"\n",(0,t.jsx)(r.li,{children:"Major API simplification. Instead of mirroring POSIX APIs, the new API better captures the core requirements of P2P file transfer."}),"\n",(0,t.jsxs)(r.li,{children:["Auxiliary tools, ",(0,t.jsx)(r.a,{href:"../references/helpers/localdrive.md",children:(0,t.jsx)(r.code,{children:"localdrive"})})," and ",(0,t.jsx)(r.a,{href:"../references/helpers/mirrordrive.md",children:(0,t.jsx)(r.code,{children:"mirrordrive"})}),", that streamline import/export flows and make it easy to mirror drives to and from the local filesystem."]}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{title:"How To Use",type:"tip",children:(0,t.jsxs)(r.p,{children:["Learn ",(0,t.jsx)(r.a,{href:"../how-to/replicate-and-persist-data/create-a-full-peer-to-peer-filesystem-with-hyperdrive.md",children:"how to create a peer-to-peer filesystem with Hyperdrive"}),"."]})}),"\n",(0,t.jsx)(r.h2,{id:"autobase",children:"Autobase"}),"\n",(0,t.jsx)(r.p,{children:"Autobase is a multi-writer data structure for combining multiple writer cores into a view of the system. Using the event sourcing pattern, writers append blocks which are linearized into an eventually consistent order for building a view of the system, combining their inputs."}),"\n",(0,t.jsx)(r.h2,{id:"hyperdht",children:"HyperDHT"}),"\n",(0,t.jsxs)(r.p,{children:["The distributed hash table (DHT) powering ",(0,t.jsx)(r.a,{href:"#hyperswarm",children:"Hyperswarm"})," and built on top of ",(0,t.jsx)(r.a,{href:"https://github.com/holepunchto/dht-rpc",children:"dht-rpc"}),". The ",(0,t.jsx)(r.a,{href:"../references/building-blocks/hyperdht.md",children:"HyperDHT"})," uses a series of holepunching techniques to ensure connectivity works on most networks and is mainly used to facilitate finding and connecting to peers using end-to-end encrypted Noise streams."]}),"\n",(0,t.jsx)(r.p,{children:"In the HyperDHT, peers are identified by a public key, not by an IP address. A public key can be connected regardless of where the peers are located, even if they move between different networks."}),"\n",(0,t.jsx)(r.p,{children:"Notable features include:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"lower-level module provides direct access to the DHT for connecting peers using key pairs"}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{title:"How To Use",type:"tip",children:(0,t.jsxs)(r.p,{children:["Learn ",(0,t.jsx)(r.a,{href:"../how-to/connect-to-peers/connect-two-pears-with-hyper-dht.md",children:"how to connect to two peers using HyperDHT"}),"."]})}),"\n",(0,t.jsx)(r.h2,{id:"hyperswarm",children:"Hyperswarm"}),"\n",(0,t.jsx)(r.p,{children:"Hyperswarm helps to find and connect to peers announcing a common 'topic' that can be anything. Using Hyperswarm, discover and connect peers with a shared interest over a distributed network. For example, we often use Hypercore's discovery key as the swarm topic for discovering peers to replicate with."}),"\n",(0,t.jsxs)(r.p,{children:["Hyperswarm offers a simple interface to abstract away the complexities of underlying modules such as ",(0,t.jsx)(r.a,{href:"../references/building-blocks/hyperdht.md",children:"HyperDHT"})," and ",(0,t.jsx)(r.a,{href:"../references/helpers/secretstream.md",children:"SecretStream"}),". These modules can also be used independently for specialized tasks."]}),"\n",(0,t.jsx)(r.p,{children:"Notable features include:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"An improved UDP holepunching algorithm that uses arbitrary DHT nodes (optionally selected by the connecting peers) to proxy necessary metadata while being maximally privacy-preserving."}),"\n",(0,t.jsxs)(r.li,{children:["A custom-built transport protocol, ",(0,t.jsx)(r.a,{href:"https://github.com/holepunchto/libudx",children:"UDX"}),", that takes advantage of the holepunching algorithm to avoid unnecessary overhead (it doesn't include handshaking since holepunching takes care of that, for example). It's blazing fast."]}),"\n",(0,t.jsxs)(r.li,{children:["A simplified DHT API that closely resembles NodeJS's ",(0,t.jsx)(r.code,{children:"net"})," module, but using public keys instead of IP addresses."]}),"\n",(0,t.jsx)(r.li,{}),"\n"]}),"\n",(0,t.jsx)(r.admonition,{title:"How To Use",type:"tip",children:(0,t.jsxs)(r.p,{children:["Learn ",(0,t.jsx)(r.a,{href:"../how-to/connect-to-peers/connect-two-pears-with-hyper-dht.md",children:"how to connect to multiple peers using HyperSwarm"}),"."]})})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);