<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-references/bare/overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Bare | Pear Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lucas-tortora.github.io/pear-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lucas-tortora.github.io/pear-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lucas-tortora.github.io/pear-docs/references/bare/overview"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bare | Pear Docs"><meta data-rh="true" name="description" content="Small and modular JavaScript runtime for desktop and mobile. Like Node.js, it provides an asynchronous, event-driven architecture for writing applications in the lingua franca of modern software. Unlike Node.js, it makes embedding and cross-device support core use cases, aiming to run just as well on your phone as on your laptop. The result is a runtime ideal for networked, peer-to-peer applications that can run on a wide selection of hardware."><meta data-rh="true" property="og:description" content="Small and modular JavaScript runtime for desktop and mobile. Like Node.js, it provides an asynchronous, event-driven architecture for writing applications in the lingua franca of modern software. Unlike Node.js, it makes embedding and cross-device support core use cases, aiming to run just as well on your phone as on your laptop. The result is a runtime ideal for networked, peer-to-peer applications that can run on a wide selection of hardware."><link data-rh="true" rel="icon" href="/pear-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lucas-tortora.github.io/pear-docs/references/bare/overview"><link data-rh="true" rel="alternate" href="https://lucas-tortora.github.io/pear-docs/references/bare/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://lucas-tortora.github.io/pear-docs/references/bare/overview" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Bare","item":"https://lucas-tortora.github.io/pear-docs/references/bare/overview"}]}</script><link rel="stylesheet" href="/pear-docs/assets/css/styles.4b065cb5.css">
<script src="/pear-docs/assets/js/runtime~main.b1f38c1e.js" defer="defer"></script>
<script src="/pear-docs/assets/js/main.07b94650.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/pear-docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pear-docs/"><div class="navbar__logo"><img src="/pear-docs/img/logo.svg" alt="Lucas Tortora - Pear Docs Revamp" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pear-docs/img/logo.svg" alt="Lucas Tortora - Pear Docs Revamp" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Lucas Tortora - Pear Docs Revamp</b></a><a class="navbar__item navbar__link" href="/pear-docs/getting-started/install/">Getting Started</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/lucas-tortora/pear" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pear-docs/"><span title="Pear by Holepunch" class="linkLabel_WmDU">Pear by Holepunch</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pear-docs/getting-started/install"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pear-docs/how-to/connect-two-pears-with-hyper-dht"><span title="How To" class="categoryLinkLabel_W154">How To</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/pear-docs/references/bare/api"><span title="References" class="categoryLinkLabel_W154">References</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/pear-docs/references/bare/api"><span title="Bare" class="categoryLinkLabel_W154">Bare</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/bare/api"><span title="API" class="linkLabel_WmDU">API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/bare/bare-modules"><span title="bare-module" class="linkLabel_WmDU">bare-module</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/bare/nodejs-compatibility-with-bare"><span title="Node.js Compatibility with Bare" class="linkLabel_WmDU">Node.js Compatibility with Bare</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pear-docs/references/bare/overview"><span title="Bare" class="linkLabel_WmDU">Bare</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/bare/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/pear-docs/references/pear/api"><span title="Pear" class="categoryLinkLabel_W154">Pear</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/pear-docs/references/helpers/compact-encoding"><span title="Building Blocks" class="categoryLinkLabel_W154">Building Blocks</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/pear-docs/references/helpers/compact-encoding"><span title="Helpers" class="categoryLinkLabel_W154">Helpers</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/pear-docs/references/tools/drives"><span title="Tools" class="categoryLinkLabel_W154">Tools</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pear-docs/faq"><span title="Frequently Asked Questions" class="linkLabel_WmDU">Frequently Asked Questions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pear-docs/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pear-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">References</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Bare</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Bare</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Bare</h1></header>
<p>Small and modular JavaScript runtime for desktop and mobile. Like Node.js, it provides an asynchronous, event-driven architecture for writing applications in the lingua franca of modern software. Unlike Node.js, it makes embedding and cross-device support core use cases, aiming to run just as well on your phone as on your laptop. The result is a runtime ideal for networked, peer-to-peer applications that can run on a wide selection of hardware.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i -g bare</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage" translate="no">​</a></h2>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bare [flags] &lt;filename&gt; [...args]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Evaluate a script or start a REPL session if no script is provided.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Arguments:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;filename&gt;            The name of a script to evaluate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [...args]             Additional arguments made available to the script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Flags:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --version|-v          Print the Bare version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --eval|-e &lt;script&gt;    Evaluate an inline script</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --print|-p &lt;script&gt;   Evaluate an inline script and print the result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --inspect             Activate the inspector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --help|-h             Show help</span><br></span></code></pre></div></div>
<p>The specified <code>&lt;script&gt;</code> or <code>&lt;filename&gt;</code> is run using <code>Module.load()</code>. For more information on the module system and the supported formats, see <a href="https://github.com/holepunchto/bare-module" target="_blank" rel="noopener noreferrer" class="">BareModule</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture" translate="no">​</a></h2>
<p>Bare is built on top of <a href="https://github.com/holepunchto/libjs" target="_blank" rel="noopener noreferrer" class="">holepunchto/libjs</a>, which provides low-level bindings to V8 in an engine independent manner, and <a href="https://github.com/libuv/libuv" target="_blank" rel="noopener noreferrer" class="">libuv/libuv</a>, which provides an asynchronous I/O event loop. Bare itself only adds a few missing pieces on top to support a wider ecosystem of modules:</p>
<ol>
<li class="">A module system supporting both CJS and ESM with bidirectional interoperability between the two.</li>
<li class="">A native addon system supporting both statically and dynamically linked addons.</li>
<li class="">Light-weight thread support with synchronous joins and shared array buffer support.</li>
</ol>
<p>Everything else if left to userland modules to implement using these primitives, keeping the runtime itself succint and <em>bare</em>. By abstracting over both the underlying JavaScript engine using <code>libjs</code> and platform I/O operations using <code>libuv</code>, Bare allows module authors to implement native addons that can run on any JavaScript engine that implements the <code>libjs</code> ABI and any system that <code>libuv</code> supports.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API" translate="no">​</a></h2>
<p>Bare makes it easy to craft applications that can run effectively across a broad spectrum of devices. To get started, find the Bare API specs <a class="" href="/pear-docs/references/bare/api">here</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="modules">Modules<a href="#modules" class="hash-link" aria-label="Direct link to Modules" title="Direct link to Modules" translate="no">​</a></h3>
<p>Bare provides no standard library beyond the core JavaScript API available through the <code>Bare</code> namespace. Instead, there is a comprehensive collection of external modules built specifically for Bare, see <a class="" href="/pear-docs/references/bare/bare-modules">Bare Modules</a></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="embedding">Embedding<a href="#embedding" class="hash-link" aria-label="Direct link to Embedding" title="Direct link to Embedding" translate="no">​</a></h3>
<p>Bare can easily be embedded using the C API defined in <a href="https://github.com/holepunchto/bare/blob/main/include/bare.h" target="_blank" rel="noopener noreferrer" class=""><code>include/bare.h</code></a>:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;bare.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;uv.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">bare_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">bare</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">bare_setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uv_default_loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> platform</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">env </span><span class="token comment" style="color:#999988;font-style:italic">/* Optional */</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> argc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> argv</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">bare</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">bare_load</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> filename</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">module </span><span class="token comment" style="color:#999988;font-style:italic">/* Optional */</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">bare_run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bare</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> exit_code</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">bare_teardown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bare</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">exit_code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>If <code>source</code> is <code>NULL</code>, the contents of <code>filename</code> will instead be read at runtime. For examples of how to embed Bare on mobile platforms, see <a href="https://github.com/holepunchto/bare-android" target="_blank" rel="noopener noreferrer" class="">Bare Android</a> and <a href="https://github.com/holepunchto/bare-ios" target="_blank" rel="noopener noreferrer" class="">Bare iOS</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="suspension">Suspension<a href="#suspension" class="hash-link" aria-label="Direct link to Suspension" title="Direct link to Suspension" translate="no">​</a></h3>
<p>Bare provides a mechanism for implementing process suspension, which is needed for platforms with strict application lifecycle constraints, such as mobile platforms. When suspended, a <code>suspend</code> event will be emitted on the <code>Bare</code> namespace. Then, when the loop has no work left and would otherwise exit, an <code>idle</code> event will be emitted and the loop blocked, keeping it from exiting. When the process is later resumed, a <code>resume</code> event will be emitted and the loop unblocked, allowing it to exit when no work is left.</p>
<p>The suspension API is available through <code>bare_suspend()</code> and <code>bare_resume()</code> from C and <code>Bare.suspend()</code> and <code>Bare.resume()</code> from JavaScript.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="building">Building<a href="#building" class="hash-link" aria-label="Direct link to Building" title="Direct link to Building" translate="no">​</a></h2>
<p><a href="https://github.com/holepunchto/bare-make" target="_blank" rel="noopener noreferrer" class=""><code>BareMake</code></a> is used for compiling Bare. Start by installing the tool globally:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i -g bare-make</span><br></span></code></pre></div></div>
<p>Next, install the required build and runtime dependencies:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i</span><br></span></code></pre></div></div>
<p>Then, generate the build system:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bare-make generate</span><br></span></code></pre></div></div>
<p>This only has to be run once per repository checkout. When updating <code>bare-make</code> or your compiler toolchain it might also be necessary to regenerate the build system. To do so, run the command again with the <code>--no-cache</code> flag set to disregard the existing build system cache:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bare-make generate --no-cache</span><br></span></code></pre></div></div>
<p>With a build system generated, Bare can be compiled:</p>
<div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bare-make build</span><br></span></code></pre></div></div>
<p>When completed, the <code>bare(.exe)</code> binary will be available in the <code>build/bin</code> directory and the <code>libbare.(a|lib)</code> and <code>(lib)bare.(dylib|dll|lib)</code> libraries will be available in the root of the <code>build</code> directory.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="linking">Linking<a href="#linking" class="hash-link" aria-label="Direct link to Linking" title="Direct link to Linking" translate="no">​</a></h3>
<p>When linking against the static <code>libbare.(a|lib)</code> library, make sure to use whole archive linking as Bare relies on constructor functions for registering native addons. Without whole archive linking, the linker will remove the constructor functions as they aren&#x27;t referenced by anything.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="options">Options<a href="#options" class="hash-link" aria-label="Direct link to Options" title="Direct link to Options" translate="no">​</a></h3>
<p>Bare provides a few compile options that can be configured to customize various aspects of the runtime. Compile options may be set by passing the <code>--define option=value</code> flag to the <code>bare-make generate</code> command when generating the build system.</p>
<blockquote>
<p>[!WARNING]<br>
<!-- -->The compile options are not covered by semantic versioning and are subject to change without warning.</p>
</blockquote>
<table><thead><tr><th style="text-align:left">Option</th><th style="text-align:left">Default</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>BARE_ENGINE</code></td><td style="text-align:left"><code>github:holepunchto/libjs</code></td><td style="text-align:left">The JavaScript engine to use</td></tr><tr><td style="text-align:left"><code>BARE_PREBUILDS</code></td><td style="text-align:left"><code>ON</code></td><td style="text-align:left">Enable prebuilds for supported third-party dependencies</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="platform-support">Platform support<a href="#platform-support" class="hash-link" aria-label="Direct link to Platform support" title="Direct link to Platform support" translate="no">​</a></h2>
<p>Bare uses a tiered support system to manage expectations for the platforms that it targets. Targets may move between tiers between minor releases and as such a change in tier will not be considered a breaking change.</p>
<p><strong>Tier 1:</strong> Platform targets for which prebuilds are provided as defined by the <a href="https://github.com/holepunchto/bare/blob/main/.github/workflows/prebuild.yml" target="_blank" rel="noopener noreferrer" class=""><code>.github/workflows/prebuild.yml</code></a> workflow. Compilation and test failures for these targets will cause workflow runs to go red.</p>
<p><strong>Tier 2:</strong> Platform targets for which Bare is known to work, but without automated compilation and testing. Regressions may occur between releases and will be considered bugs.</p>
<blockquote>
<p>[!NOTE]<br>
<!-- -->Development happens primarily on Apple hardware with Linux and Windows systems running as virtual machines.</p>
</blockquote>
<table><thead><tr><th style="text-align:left">Platform</th><th style="text-align:left">Architecture</th><th style="text-align:left">Version</th><th style="text-align:left">Tier</th><th style="text-align:left">Notes</th></tr></thead><tbody><tr><td style="text-align:left">GNU/Linux</td><td style="text-align:left"><code>arm64</code></td><td style="text-align:left">&gt;= Linux 5.15, &gt;= GNU C Library 2.35</td><td style="text-align:left">1</td><td style="text-align:left">Ubuntu 22.04, OpenWrt 23.05</td></tr><tr><td style="text-align:left">GNU/Linux</td><td style="text-align:left"><code>x64</code></td><td style="text-align:left">&gt;= Linux 5.15, &gt;= GNU C Library 2.35</td><td style="text-align:left">1</td><td style="text-align:left">Ubuntu 22.04, OpenWrt 23.05</td></tr><tr><td style="text-align:left">GNU/Linux</td><td style="text-align:left"><code>arm64</code></td><td style="text-align:left">&gt;= Linux 5.10, &gt;= musl 1.2</td><td style="text-align:left">2</td><td style="text-align:left">Alpine 3.13, OpenWrt 22.03</td></tr><tr><td style="text-align:left">GNU/Linux</td><td style="text-align:left"><code>x64</code></td><td style="text-align:left">&gt;= Linux 5.10, &gt;= musl 1.2</td><td style="text-align:left">2</td><td style="text-align:left">Alpine 3.13, OpenWrt 22.03</td></tr><tr><td style="text-align:left">GNU/Linux</td><td style="text-align:left"><code>mips</code></td><td style="text-align:left">&gt;= Linux 5.10, &gt;= musl 1.2</td><td style="text-align:left">2</td><td style="text-align:left">OpenWrt 22.03</td></tr><tr><td style="text-align:left">GNU/Linux</td><td style="text-align:left"><code>mipsel</code></td><td style="text-align:left">&gt;= Linux 5.10, &gt;= musl 1.2</td><td style="text-align:left">2</td><td style="text-align:left">OpenWrt 22.03</td></tr><tr><td style="text-align:left">Android</td><td style="text-align:left"><code>arm</code></td><td style="text-align:left">&gt;= 9</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Android</td><td style="text-align:left"><code>arm64</code></td><td style="text-align:left">&gt;= 9</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Android</td><td style="text-align:left"><code>ia32</code></td><td style="text-align:left">&gt;= 9</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Android</td><td style="text-align:left"><code>x64</code></td><td style="text-align:left">&gt;= 9</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">macOS</td><td style="text-align:left"><code>arm64</code></td><td style="text-align:left">&gt;= 11.0</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">macOS</td><td style="text-align:left"><code>x64</code></td><td style="text-align:left">&gt;= 11.0</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">iOS</td><td style="text-align:left"><code>arm64</code></td><td style="text-align:left">&gt;= 14.0</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">iOS</td><td style="text-align:left"><code>x64</code></td><td style="text-align:left">&gt;= 14.0</td><td style="text-align:left">1</td><td style="text-align:left">Simulator only</td></tr><tr><td style="text-align:left">Windows</td><td style="text-align:left"><code>arm64</code></td><td style="text-align:left">&gt;= Windows 11</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Windows</td><td style="text-align:left"><code>x64</code></td><td style="text-align:left">&gt;= Windows 10</td><td style="text-align:left">1</td><td style="text-align:left"></td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/references/bare/overview.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pear-docs/references/bare/nodejs-compatibility-with-bare"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Node.js Compatibility with Bare</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pear-docs/references/bare/troubleshooting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Troubleshooting</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a><ul><li><a href="#modules" class="table-of-contents__link toc-highlight">Modules</a></li><li><a href="#embedding" class="table-of-contents__link toc-highlight">Embedding</a></li><li><a href="#suspension" class="table-of-contents__link toc-highlight">Suspension</a></li></ul></li><li><a href="#building" class="table-of-contents__link toc-highlight">Building</a><ul><li><a href="#linking" class="table-of-contents__link toc-highlight">Linking</a></li><li><a href="#options" class="table-of-contents__link toc-highlight">Options</a></li></ul></li><li><a href="#platform-support" class="table-of-contents__link toc-highlight">Platform support</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"></div></footer></div>
</body>
</html>