<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-references/building-blocks/hypercore" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Hypercore | Pear Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://lucas-tortora.github.io/pear-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://lucas-tortora.github.io/pear-docs/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://lucas-tortora.github.io/pear-docs/references/building-blocks/hypercore"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Hypercore | Pear Docs"><meta data-rh="true" name="description" content="Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications."><meta data-rh="true" property="og:description" content="Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications."><link data-rh="true" rel="icon" href="/pear-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lucas-tortora.github.io/pear-docs/references/building-blocks/hypercore"><link data-rh="true" rel="alternate" href="https://lucas-tortora.github.io/pear-docs/references/building-blocks/hypercore" hreflang="en"><link data-rh="true" rel="alternate" href="https://lucas-tortora.github.io/pear-docs/references/building-blocks/hypercore" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"References","item":"https://lucas-tortora.github.io/pear-docs/references/"},{"@type":"ListItem","position":2,"name":"Building Blocks","item":"https://lucas-tortora.github.io/pear-docs/references/building-blocks/overview"},{"@type":"ListItem","position":3,"name":"Hypercore","item":"https://lucas-tortora.github.io/pear-docs/references/building-blocks/hypercore"}]}</script><link rel="stylesheet" href="/pear-docs/assets/css/styles.2f4d04e7.css">
<script src="/pear-docs/assets/js/runtime~main.f81fc2be.js" defer="defer"></script>
<script src="/pear-docs/assets/js/main.25a23557.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/pear-docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pear-docs/"><div class="navbar__logo"><img src="/pear-docs/img/logo.svg" alt="Lucas Tortora - Pear Docs Revamp" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/pear-docs/img/logo.svg" alt="Lucas Tortora - Pear Docs Revamp" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Lucas Tortora - Pear Docs Revamp</b></a><a class="navbar__item navbar__link" href="/pear-docs/about-pear/what-is-pear">About Pear</a><a class="navbar__item navbar__link" href="/pear-docs/getting-started/install/">Getting Started</a><a class="navbar__item navbar__link" href="/pear-docs/how-to/">How To</a><a class="navbar__item navbar__link" href="/pear-docs/tutorials/">Tutorials</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pear-docs/references/">References</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/lucas-tortora/pear" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pear-docs/"><span title="Pear by Holepunch" class="linkLabel_WmDU">Pear by Holepunch</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/pear-docs/about-pear/what-is-pear"><span title="About Pear" class="categoryLinkLabel_W154">About Pear</span></a><button aria-label="Expand sidebar category &#x27;About Pear&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pear-docs/getting-started/install"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/pear-docs/how-to/"><span title="How To" class="categoryLinkLabel_W154">How To</span></a><button aria-label="Expand sidebar category &#x27;How To&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/pear-docs/tutorials/"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/pear-docs/references/"><span title="References" class="categoryLinkLabel_W154">References</span></a><button aria-label="Collapse sidebar category &#x27;References&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/pear-docs/references/pear/overview"><span title="Pear" class="categoryLinkLabel_W154">Pear</span></a><button aria-label="Expand sidebar category &#x27;Pear&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/pear-docs/references/bare/overview"><span title="Bare" class="categoryLinkLabel_W154">Bare</span></a><button aria-label="Expand sidebar category &#x27;Bare&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/pear-docs/references/building-blocks/overview"><span title="Building Blocks" class="categoryLinkLabel_W154">Building Blocks</span></a><button aria-label="Collapse sidebar category &#x27;Building Blocks&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/building-blocks/autobase"><span title="Autobase" class="linkLabel_WmDU">Autobase</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/building-blocks/hyperbee"><span title="Hyperbee" class="linkLabel_WmDU">Hyperbee</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pear-docs/references/building-blocks/hypercore"><span title="Hypercore" class="linkLabel_WmDU">Hypercore</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/building-blocks/hyperdht"><span title="HyperDHT" class="linkLabel_WmDU">HyperDHT</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/building-blocks/hyperdrive"><span title="Hyperdrive" class="linkLabel_WmDU">Hyperdrive</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/building-blocks/hyperswarm"><span title="Hyperswarm" class="linkLabel_WmDU">Hyperswarm</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/pear-docs/references/building-blocks/overview"><span title="Building Blocks Overview" class="linkLabel_WmDU">Building Blocks Overview</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/pear-docs/references/helpers/overview"><span title="Helpers" class="categoryLinkLabel_W154">Helpers</span></a><button aria-label="Expand sidebar category &#x27;Helpers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/pear-docs/references/tools/overview"><span title="Tools" class="categoryLinkLabel_W154">Tools</span></a><button aria-label="Expand sidebar category &#x27;Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pear-docs/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pear-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/pear-docs/references/"><span>References</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/pear-docs/references/building-blocks/overview"><span>Building Blocks</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Hypercore</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Hypercore</h1></header>
<p>Hypercore is a secure, distributed append-only log built for sharing large datasets and streams of real-time data. It comes with a secure transport protocol, making it easy to build fast and scalable peer-to-peer applications.</p>
<p>Notable features include:</p>
<ul>
<li class="">Improved fork detection in the replication protocol, to improve resilience.</li>
<li class="">Optional on-disk encryption for blocks (in addition to the existing transport encryption).</li>
<li class="">A write-ahead log in the storage layer to ensure that power loss or unexpected shutdown cannot lead to data corruption.</li>
<li class="">The <a href="#core.session-options" class=""><code>session</code></a> and <a href="#core.snapshot-options" class=""><code>snapshot</code></a> methods for providing multiple views over the same underlying Hypercore, which simplifies resource management.</li>
<li class="">A <a href="#await-core.truncate-newlength-forkid" class=""><code>truncate</code></a> method for intentionally creating a new fork, starting at a given length. We use this method extensively in <a class="" href="/pear-docs/references/building-blocks/autobase"><code>autobase</code></a>.</li>
</ul>
<blockquote>
<p><a href="https://github.com/holepunchto/hypercore" target="_blank" rel="noopener noreferrer" class="">GitHub (Hypercore)</a></p>
</blockquote>
<ul>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore">Hypercore</a>
<ul>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#installation">Creating a new instance</a></li>
<li class="">Basic:<!-- -->
<ul>
<li class="">Properties:<!-- -->
<ul>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.writable">core.writable</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.readable">core.readable</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.id">core.id</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.key">core.key</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.keypair">core.keyPair</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.discoverykey">core.discoveryKey</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.encryptionkey">core.encryptionKey</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.length">core.length</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.contiguouslength">core.contiguousLength</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.fork">core.fork</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.padding">core.padding</a></li>
</ul>
</li>
<li class="">Methods:<!-- -->
<ul>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.append">core.append(block)</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.get">core.get(index, [options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.has">core.has(start, [end])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.update">core.update()</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.seek">core.seek(byteOffset)</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.createreadstream">core.createReadStream([options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.createbytestream">core.createByteStream([options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.clear">core.clear(start, [end], [options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.truncate">core.truncate(newLength, [forkId])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.purge">core.purge()</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.treehash">core.treeHash([length])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.download">core.download([range])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.session">core.session([options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.info">core.info([options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.close">core.close()</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.ready">core.ready()</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.replicate">core.replicate(isInitiatorOrReplicationStream, [options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.findingpeers">core.findingPeers()</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.session">core.session([options])</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.snapshot">core.snapshot([options])</a></li>
</ul>
</li>
<li class="">Events:<!-- -->
<ul>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.onappend">append</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.ontruncate">truncate</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.onready">ready</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.onclose">close</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.onpeer-add">peer-add</a></li>
<li class=""><a class="" href="/pear-docs/references/building-blocks/hypercore#core.onpeer-remove">peer-remove</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" translate="no">​</a></h3>
<p>Install with <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer" class="">npm</a>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install hypercore</span><br></span></code></pre></div></div>
<p>A Hypercore can only be modified by its creator; internally it signs updates with a private key that&#x27;s meant to live on a single machine, and should never be shared. However, the writer can replicate to many readers, in a manner similar to BitTorrent.</p>
<blockquote>
<p>Unlike BitTorrent, a Hypercore can be modified after its initial creation, and peers can receive live update notifications whenever the writer adds new blocks.</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="api">API<a href="#api" class="hash-link" aria-label="Direct link to API" title="Direct link to API" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="const-core--new-hypercorestorage-key-options"><strong><code>const core = new Hypercore(storage, [key], [options])</code></strong><a href="#const-core--new-hypercorestorage-key-options" class="hash-link" aria-label="Direct link to const-core--new-hypercorestorage-key-options" title="Direct link to const-core--new-hypercorestorage-key-options" translate="no">​</a></h4>
<p>Creates a new Hypercore instance.</p>
<p><code>storage</code> should be set to a directory where to store the data and core metadata.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Hypercore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./directory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// store data in ./directory</span><br></span></code></pre></div></div>
<blockquote>
<p>Alternatively, the user can pass a function instead that is called with every filename Hypercore needs to function and return a <a href="https://github.com/random-access-storage/abstract-random-access" target="_blank" rel="noopener noreferrer" class="">abstract-random-access</a> instance that is used to store the data.</p>
</blockquote>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">RAM</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;random-access-memory&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Hypercore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">filename</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Filename will be one of: data, bitfield, tree, signatures, key, secret_key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// The data file will contain all the data concatenated.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Store all files in ram by returning a random-access-memory instance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RAM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>By default Hypercore uses <a href="https://github.com/random-access-storage/random-access-file" target="_blank" rel="noopener noreferrer" class="">random-access-file</a>. This is also useful for storing specific files in other directories.</p>
<p>Hypercore will produce the following files:</p>
<ul>
<li class=""><code>oplog</code> - The internal truncating journal/oplog that tracks mutations, the public key, and other metadata.</li>
<li class=""><code>tree</code> - The Merkle Tree file.</li>
<li class=""><code>bitfield</code> - The bitfield marking which data blocks this core has.</li>
<li class=""><code>data</code> - The raw data of each block.</li>
</ul>
<blockquote>
<p><code>tree</code>, <code>data</code>, and <code>bitfield</code> are normally very sparse files.</p>
</blockquote>
<p><code>key</code> can be set to a Hypercore public key. When unset this the public key will be loaded from storage. If no key exists a new key pair will be generated.</p>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>createIfMissing</code></strong></td><td>create a new Hypercore key pair if none was present in the storage</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>overwrite</code></strong></td><td>overwrite any old Hypercore that might already exist</td><td>Boolean</td><td><code>false</code></td></tr><tr><td style="text-align:center"><strong><code>sparse</code></strong></td><td>enable sparse mode, counting unavailable blocks towards core.length and core.byteLength</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>valueEncoding</code></strong></td><td>one of &#x27;json&#x27;, &#x27;utf-8&#x27;, or &#x27;binary&#x27;</td><td>String</td><td><code>&#x27;binary&#x27;</code></td></tr><tr><td style="text-align:center"><strong><code>encodeBatch</code></strong></td><td>optionally apply an encoding to complete batches</td><td>Function</td><td><code>batch =&gt; { ... }</code></td></tr><tr><td style="text-align:center"><strong><code>keyPair</code></strong></td><td>optionally pass the public key and secret key as a key pair</td><td>Object</td><td><code>null</code></td></tr><tr><td style="text-align:center"><strong><code>encryptionKey</code></strong></td><td>optionally pass an encryption key to enable block encryption</td><td>Buffer</td><td><code>null</code></td></tr><tr><td style="text-align:center"><strong><code>onwait</code></strong></td><td>hook that is called if gets are waiting for download</td><td>Function</td><td><code>() =&gt; {}</code></td></tr><tr><td style="text-align:center"><strong><code>timeout</code></strong></td><td>constructor timeout</td><td>integer</td><td><code>0</code></td></tr><tr><td style="text-align:center"><strong><code>writable</code></strong></td><td>disable appends and truncates</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table>
<p>We can also set valueEncoding to any <a href="https://github.com/mafintosh/abstract-encoding" target="_blank" rel="noopener noreferrer" class="">abstract-encoding</a> or <a href="https://github.com/compact-encoding" target="_blank" rel="noopener noreferrer" class="">compact-encoding</a> instance.</p>
<p>valueEncodings will be applied to individual blocks, even if we append batches. To control encoding at the batch level, the <code>encodeBatch</code> option can be used, which is a function that takes a batch and returns a binary-encoded batch. If a custom valueEncoding is provided, it will not be applied prior to <code>encodeBatch</code>.</p>
<blockquote>
<p><strong>Do not</strong> attempt to create multiple Hypercores with the same private key (i.e., on two different devices).</p>
<p>Doing so will <strong>most definitely</strong> cause a Hypercore conflict. A conflict implies that the core was implicitly forked. In such a scenario, replicating peers will &#x27;gossip&#x27; that the core should be deemed dead and unrecoverable.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.readable"><strong><code>core.readable</code></strong><a href="#core.readable" class="hash-link" aria-label="Direct link to core.readable" title="Direct link to core.readable" translate="no">​</a></h4>
<p>Can we read from this core? After <a class="" href="/pear-docs/references/building-blocks/hypercore#await-coreclose">closing</a> the core this will be <code>false</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.id"><strong><code>core.id</code></strong><a href="#core.id" class="hash-link" aria-label="Direct link to core.id" title="Direct link to core.id" translate="no">​</a></h4>
<p>A string containing the ID (z-base-32 of the public key) that identifies this core.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.key"><strong><code>core.key</code></strong><a href="#core.key" class="hash-link" aria-label="Direct link to core.key" title="Direct link to core.key" translate="no">​</a></h4>
<p>Buffer containing the public key identifying this core.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Learn more about Hypercore Keys</summary><div><div class="collapsibleContent_i85q"><p>All Hypercores are identified by two properties: A <strong>public key</strong> and a <strong>discovery key</strong>, the latter of which is derived from the public key. Importantly, the public key gives peers read **** capability — if we have the key, we can exchange blocks with other peers.</p><p>The process of block replication requires the peers to prove to each other that they know the public key. This is important because the public key is necessary for peers to be able to validate the blocks. Hence, only the peers who know the public key can perform the block replication.</p><p>Since the public key is also a read capability, it can&#x27;t be used to discover other readers (by advertising it on a DHT, for example) as that would lead to capability leaks. The discovery key, being derived from the public key but lacking read capability, can be shared openly for peer discovery.</p></div></div></details>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.keyPair"><strong><code>core.keyPair</code></strong><a href="#core.keyPair" class="hash-link" aria-label="Direct link to core.keyPair" title="Direct link to core.keyPair" translate="no">​</a></h4>
<p>An object containing buffers of the core&#x27;s public and secret key</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.discoveryKey"><strong><code>core.discoveryKey</code></strong><a href="#core.discoveryKey" class="hash-link" aria-label="Direct link to core.discoveryKey" title="Direct link to core.discoveryKey" translate="no">​</a></h4>
<p>Buffer containing a key derived from the core&#x27;s public key. In contrast to <code>core.key,</code> this key can not be used to verify the data. It can be used to announce or look for peers that are sharing the same core, without leaking the core key.</p>
<blockquote>
<p>The above properties are populated after <a class="" href="/pear-docs/references/building-blocks/hypercore#await-core.ready"><code>ready</code></a> has been emitted. Will be <code>null</code> before the event.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.encryptionKey"><strong><code>core.encryptionKey</code></strong><a href="#core.encryptionKey" class="hash-link" aria-label="Direct link to core.encryptionKey" title="Direct link to core.encryptionKey" translate="no">​</a></h4>
<p>Buffer containing the optional block encryption key of this core. Will be <code>null</code> unless block encryption is enabled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.writable"><strong><code>core.writable</code></strong><a href="#core.writable" class="hash-link" aria-label="Direct link to core.writable" title="Direct link to core.writable" translate="no">​</a></h4>
<p>Can we append to this core?</p>
<blockquote>
<p>Populated after <a class="" href="/pear-docs/references/building-blocks/hypercore#await-core.ready"><code>ready</code></a> has been emitted. Will be <code>false</code> before the event.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.length"><strong><code>core.length</code></strong><a href="#core.length" class="hash-link" aria-label="Direct link to core.length" title="Direct link to core.length" translate="no">​</a></h4>
<p>The number of blocks of data available on this core. If <code>sparse: false</code>, this will equal <code>core.contiguousLength</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.contiguousLength"><strong><code>core.contiguousLength</code></strong><a href="#core.contiguousLength" class="hash-link" aria-label="Direct link to core.contiguousLength" title="Direct link to core.contiguousLength" translate="no">​</a></h4>
<p>The number of blocks contiguously available starting from the first block of this core.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.fork"><strong><code>core.fork</code></strong><a href="#core.fork" class="hash-link" aria-label="Direct link to core.fork" title="Direct link to core.fork" translate="no">​</a></h4>
<p>The current fork id of this core</p>
<blockquote>
<p>The above properties are populated after <a class="" href="/pear-docs/references/building-blocks/hypercore#await-core.ready"><code>ready</code></a> has been emitted. Will be <code>0</code> before the event.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.padding"><strong><code>core.padding</code></strong><a href="#core.padding" class="hash-link" aria-label="Direct link to core.padding" title="Direct link to core.padding" translate="no">​</a></h4>
<p>The amount of padding applied to each block of this core. Will be <code>0</code> unless block encryption is enabled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods" translate="no">​</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.append"><strong><code>const { length, byteLength } = await core.append(block)</code></strong><a href="#core.append" class="hash-link" aria-label="Direct link to core.append" title="Direct link to core.append" translate="no">​</a></h4>
<p>Append a block of data (or an array of blocks) to the core. Returns the new length and byte length of the core.</p>
<blockquote>
<p>This operation is &#x27;atomic&#x27;. This means that the block is appended altogether or not at all (in case of I/O failure).</p>
</blockquote>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// simple call append with a new block of data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;I am a block of data&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// pass an array to append multiple blocks as a batch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;batch block 1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;batch block 2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.get"><strong><code>const block = await core.get(index, [options])</code></strong><a href="#core.get" class="hash-link" aria-label="Direct link to core.get" title="Direct link to core.get" translate="no">​</a></h4>
<p>Get a block of data. If the data is not available locally this method will prioritize and wait for the data to be downloaded.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// get block #42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> block </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get block #43, but only wait 5s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> blockIfFast </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">43</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5000</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// get block #44, but only if we have it locally</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> blockLocal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">44</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">wait</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>wait</code></strong></td><td>Wait for the block to be downloaded</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>onwait</code></strong></td><td>Hook that is called if the get is waiting for download</td><td>Boolean</td><td><code>() =&gt; {}</code></td></tr><tr><td style="text-align:center"><strong><code>timeout</code></strong></td><td>Wait at max some milliseconds (0 means no timeout)</td><td>Boolean</td><td><code>0</code></td></tr><tr><td style="text-align:center"><strong><code>valueEncoding</code></strong></td><td>One of &#x27;json&#x27;, &#x27;utf-8&#x27;, or &#x27;binary&#x27;</td><td>String</td><td>core&#x27;s valueEncoding</td></tr><tr><td style="text-align:center"><strong><code>decrypt</code></strong></td><td>Automatically decrypts the block if encrypted</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.has"><strong><code>const has = await core.has(start, [end])</code></strong><a href="#core.has" class="hash-link" aria-label="Direct link to core.has" title="Direct link to core.has" translate="no">​</a></h4>
<p>Check if the core has all blocks between <code>start</code> and <code>end</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.update"><strong><code>const updated = await core.update([options])</code></strong><a href="#core.update" class="hash-link" aria-label="Direct link to core.update" title="Direct link to core.update" translate="no">​</a></h4>
<p>Wait for the core to try and find a signed update to its length. Does not download any data from peers except for proof of the new core length.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updated </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">update</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;core was updated?&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> updated</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;length is&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>wait</code></strong></td><td>Wait for the meta-data of hypercore to be updated</td><td>Boolean</td><td><code>replicator.findingPeers &gt; 0</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.seek"><strong><code>const [index, relativeOffset] = await core.seek(byteOffset, [options])</code></strong><a href="#core.seek" class="hash-link" aria-label="Direct link to core.seek" title="Direct link to core.seek" translate="no">​</a></h4>
<p>Seek a byte offset.</p>
<p>Returns <code>[index, relativeOffset]</code>, where <code>index</code> is the data block the byteOffset is contained in and <code>relativeOffset</code> is the relative byte offset in the data block.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;abc&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;d&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;efg&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> first </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns [0, 1]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> second </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns [1, 0]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> third </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// returns [2, 1]</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>wait</code></strong></td><td>wait for data to be downloaded</td><td>Boolean</td><td><code>true</code></td></tr><tr><td><strong><code>timeout</code></strong></td><td>wait for given milliseconds</td><td>Integer</td><td><code>core.timeout</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.readstream"><strong><code>const stream = core.createReadStream([options])</code></strong><a href="#core.readstream" class="hash-link" aria-label="Direct link to core.readstream" title="Direct link to core.readstream" translate="no">​</a></h4>
<p>Make a read stream to read a range of data out at once.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// read the full core</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fullStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// read from block 10-15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> partialStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">end</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// pipe the stream somewhere using the .pipe method</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or consume it as an async iterator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> fullStream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>start</code></strong></td><td>Starting offset to read a range of data</td><td>Integer</td><td><code>0</code></td></tr><tr><td><strong><code>end</code></strong></td><td>Ending offset to read a range of data</td><td>Integer</td><td><code>core.length</code></td></tr><tr><td><strong><code>live</code></strong></td><td>Allow realtime data replication</td><td>Boolean</td><td><code>false</code></td></tr><tr><td><strong><code>snapshot</code></strong></td><td>Auto set end to core.length on open or update it on every read</td><td>Boolean</td><td><code>true</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.createbytestream"><code>const bs = core.createByteStream([options])</code><a href="#core.createbytestream" class="hash-link" aria-label="Direct link to core.createbytestream" title="Direct link to core.createbytestream" translate="no">​</a></h4>
<p>Make a byte stream to read a range of bytes.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Read the full core</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fullStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createByteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Read from byte 3, and from there read 50 bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> partialStream </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createByteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">byteOffset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">byteLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Consume it as an async iterator</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> fullStream</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Or pipe it somewhere like any stream:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">partialStream</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">stdout</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>byteOffset</code></strong></td><td>Starting offset to read a range of bytes</td><td>Integer</td><td><code>0</code></td></tr><tr><td><strong><code>byteLength</code></strong></td><td>Number of bytes that will be read</td><td>Integer</td><td><code>core.byteLength - options.byteOffset</code></td></tr><tr><td><strong><code>prefetch</code></strong></td><td>Controls the number of blocks to preload</td><td>Integer</td><td><code>32</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.clear"><strong><code>const cleared = await core.clear(start, [end], [options])</code></strong><a href="#core.clear" class="hash-link" aria-label="Direct link to core.clear" title="Direct link to core.clear" translate="no">​</a></h4>
<p>Clears stored blocks between <code>start</code> and <code>end</code>, reclaiming storage when possible.</p>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><strong><code>diff</code></strong></td><td>Returned <code>cleared</code> bytes object is null unless enabled</td><td>Boolean</td><td><code>false</code></td></tr></tbody></table>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">clear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// clear block 4 from local cache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">clear</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// clear block 0-10 from local cache</span><br></span></code></pre></div></div>
<p>The core will also &#x27;gossip&#x27; with peers it is connected to, that it no longer have these blocks.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.truncate"><strong><code>await core.truncate(newLength, [forkId])</code></strong><a href="#core.truncate" class="hash-link" aria-label="Direct link to core.truncate" title="Direct link to core.truncate" translate="no">​</a></h4>
<p>Truncates the core to a smaller length.</p>
<p>Per default, this will update the fork ID of the core to <code>+ 1</code>, but we can set the preferred fork ID with the option. Note that the fork ID should be incremented in a monotone manner.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.purge"><code>await core.purge()</code><a href="#core.purge" class="hash-link" aria-label="Direct link to core.purge" title="Direct link to core.purge" translate="no">​</a></h4>
<p>Purge the Hypercore from storage, completely removing all data.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.purge"><strong><code>const hash = await core.treeHash([length])</code></strong><a href="#core.purge" class="hash-link" aria-label="Direct link to core.purge" title="Direct link to core.purge" translate="no">​</a></h4>
<p>Get the Merkle Tree hash of the core at a given length, defaulting to the current length of the core.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.download"><strong><code>const range = core.download([range])</code></strong><a href="#core.download" class="hash-link" aria-label="Direct link to core.download" title="Direct link to core.download" translate="no">​</a></h4>
<p>Download a range of data.</p>
<p>We can await until the range has been fully downloaded by doing:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> range</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>A range can have the following properties:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> startIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">end</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> nonInclusiveEndIndex</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">blocks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">linear</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// download range linearly and not randomly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>To download the full core continuously (often referred to as non-sparse mode):</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Note that this will never be considered downloaded as the range</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// will keep waiting for new blocks to be appended.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">download</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">end</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>To download a discrete range of blocks, pass a list of indices:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">download</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">blocks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>To cancel downloading a range, simply destroy the range instance:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// will stop downloading now</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">range</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">destroy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.session"><strong><code>const session = await core.session([options])</code></strong><a href="#core.session" class="hash-link" aria-label="Direct link to core.session" title="Direct link to core.session" translate="no">​</a></h4>
<p>Creates a new Hypercore instance that shares the same underlying core. Options are inherited from the parent instance, unless they are re-set.</p>
<p><code>options</code> are the same as in the constructor.</p>
<blockquote>
<p>Be sure to close any sessions made.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.info"><strong><code>const info = await core.info([options])</code></strong><a href="#core.info" class="hash-link" aria-label="Direct link to core.info" title="Direct link to core.info" translate="no">​</a></h4>
<p>Get information about this core, such as its total size in bytes.</p>
<p>The object will look like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token maybe-class-name">Info</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">discoveryKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Buffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">length</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">contiguousLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">byteLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">742</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">fork</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">padding</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">storage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">oplog</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8192</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">tree</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">blocks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">bitfield</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><code>options</code> include:</p>
<table><thead><tr><th>Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td><code>storage</code></td><td>get storage estimates in bytes</td><td>Boolean</td><td><code>false</code></td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.close"><strong><code>await core.close()</code></strong><a href="#core.close" class="hash-link" aria-label="Direct link to core.close" title="Direct link to core.close" translate="no">​</a></h4>
<p>Close this core and release any underlying resources.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.ready"><strong><code>await core.ready()</code></strong><a href="#core.ready" class="hash-link" aria-label="Direct link to core.ready" title="Direct link to core.ready" translate="no">​</a></h4>
<p>Waits for the core to open.</p>
<p>After this has been called <code>core.length</code> and other properties have been set.</p>
<blockquote>
<p>ℹ️ In general, waiting for <code>ready</code> is unnecessary unless there&#x27;s a need to check a synchronous property (like <code>key</code> or <code>discoverykey</code>) before any other async API method has been called. All async methods on the public API, await <code>ready</code> internally.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.replicate"><strong><code>const stream = core.replicate(isInitiator|stream, options)</code></strong><a href="#core.replicate" class="hash-link" aria-label="Direct link to core.replicate" title="Direct link to core.replicate" translate="no">​</a></h4>
<p>Creates a replication stream. We should pipe this to another Hypercore instance.</p>
<p>The <code>isInitiator</code> argument is a boolean indicating whether a peer is the initiator of the connection (ie the client) or the passive peer waiting for connections (i.e., the server).</p>
<blockquote>
<p>If a P2P swarm like Hyperswarm is being used, whether a peer is an initiator can be determined by checking if the swarm connection is a client socket or a server socket. In Hyperswarm, a user can check that using the <a href="https://github.com/holepunchto/hyperswarm#swarmonconnection-socket-details" target="_blank" rel="noopener noreferrer" class="">client property on the peer details object</a>.</p>
</blockquote>
<p>To multiplex the replication over an existing Hypercore replication stream, another stream instance can be passed instead of the <code>isInitiator</code> Boolean.</p>
<p>To replicate a Hypercore using <a class="" href="/pear-docs/references/building-blocks/hyperswarm"><code>Hyperswarm</code></a>:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// assuming swarm is a Hyperswarm instance and core is a Hypercore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swarm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;connection&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">conn</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p>To replicate many Hypercores over a single Hyperswarm connection, see <a class="" href="/pear-docs/references/helpers/corestore"><code>Corestore</code></a>.</p>
</blockquote>
<p>If not using <a class="" href="/pear-docs/references/building-blocks/hyperswarm"><code>Hyperswarm</code></a> or <a class="" href="/pear-docs/references/helpers/corestore"><code>Corestore</code></a>, specify the <code>isInitiator</code> field, which will create a fresh protocol stream that can be piped over any transport:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// assuming we have two cores, localCore + remoteCore, sharing the same key</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// on a server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> net </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;net&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createServer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">remoteCore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// on a client</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> socket </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> net</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">connect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">localCore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replicate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">socket</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<blockquote>
<p>In almost all cases, the use of both Hyperswarm and Corestore Replication is advised and will meet all needs.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.findingpeers"><strong><code>const done = core.findingPeers()</code></strong><a href="#core.findingpeers" class="hash-link" aria-label="Direct link to core.findingpeers" title="Direct link to core.findingpeers" translate="no">​</a></h4>
<p>Create a hook that tells Hypercore users are finding peers for this core in the background. Call <code>done</code> when user current discovery iteration is done. If using Hyperswarm, call this after a <code>swarm.flush()</code> finishes.</p>
<p>This allows <code>core.update</code> to wait for either the <code>findingPeers</code> hook to finish or one peer to appear before deciding whether it should wait for a Merkle tree update before returning.</p>
<p>In order to prevent <code>get</code> and <code>update</code> from resolving until Hyperswarm (or any other external peer discovery process) has finished, use the following pattern:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// assuming swarm is a Hyperswarm and core is a Hypercore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> done </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findingPeers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swarm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">discoveryKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// swarm.flush() can be a very expensive operation, so don&#x27;t await it</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// this just marks the &#x27;worst case&#x27;, i.e., when no additional peers will be found</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">swarm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">flush</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// if this block is not available locally, the `get` will wait until</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// *either* a peer connects *or* the swarm flush finishes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="coresessionoptions"><strong><code>core.session([options])</code></strong><a href="#coresessionoptions" class="hash-link" aria-label="Direct link to coresessionoptions" title="Direct link to coresessionoptions" translate="no">​</a></h4>
<p>Returns a new session for the Hypercore.</p>
<p>Used for the resource management of the Hypercores using reference counting. The sessions are individual openings to a Hypercore instance and consequently, the changes made through one session will be reflected across all sessions of the Hypercore.</p>
<blockquote>
<p>The returned value of <code>core.session()</code> can be used as a Hypercore instance i.e., everything provided by the Hypercore API can be used with it.</p>
</blockquote>
<p><code>options</code> include:</p>
<table><thead><tr><th style="text-align:center">Property</th><th>Description</th><th>Type</th><th>Default</th></tr></thead><tbody><tr><td style="text-align:center"><strong><code>wait</code></strong></td><td>Wait for the block to be downloaded</td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>onwait</code></strong></td><td>Hook that is called if the get is waiting for download</td><td>Boolean</td><td><code>() =&gt; {}</code></td></tr><tr><td style="text-align:center"><strong><code>sparse</code></strong></td><td>Enables sparse mode, counting unavailable blocks towards <code>core.length</code> and <code>core.byteLength</code></td><td>Boolean</td><td><code>true</code></td></tr><tr><td style="text-align:center"><strong><code>class</code></strong></td><td>class name</td><td>Class</td><td><code>Hypercore</code></td></tr></tbody></table>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> core </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Hypercore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ram</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> session1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> core</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// will not close the underlying Hypercore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> session1</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// will close the Hypercore</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.snapshot"><strong><code>core.snapshot([options])</code></strong><a href="#core.snapshot" class="hash-link" aria-label="Direct link to core.snapshot" title="Direct link to core.snapshot" translate="no">​</a></h4>
<p>Returns a snapshot of the core at that particular time. This is useful for ensuring that multiple <code>get</code> operations are acting on a consistent view of the Hypercore (i.e. if the core forks in between two reads, the second should throw an error).</p>
<p>If <a class="" href="/pear-docs/references/building-blocks/hypercore#const-updated--await-coreupdateoptions"><code>core.update()</code></a> is explicitly called on the snapshot instance, it will no longer be locked to the previous data. Rather, it will get updated with the current state of the Hypercore instance.</p>
<p><code>options</code> are the same as the options to <a class="" href="/pear-docs/references/building-blocks/hypercore#coresessionoptions"><code>core.session()</code></a>.</p>
<blockquote>
<p>The fixed-in-time Hypercore clone created via snapshotting does not receive updates from the main Hypercore, unlike the Hypercore instance returned by <code>core.session()</code>.</p>
</blockquote>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h4>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.onappend"><strong><code>core.on(&#x27;append&#x27;)</code></strong><a href="#core.onappend" class="hash-link" aria-label="Direct link to core.onappend" title="Direct link to core.onappend" translate="no">​</a></h4>
<p>Emitted when the core has been appended to (i.e., has a new length/byte length), either locally or remotely.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.ontruncate"><strong><code>core.on(&#x27;truncate&#x27;, ancestors, forkId)</code></strong><a href="#core.ontruncate" class="hash-link" aria-label="Direct link to core.ontruncate" title="Direct link to core.ontruncate" translate="no">​</a></h4>
<p>Emitted when the core has been truncated, either locally or remotely.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.onready"><strong><code>core.on(&#x27;ready&#x27;)</code></strong><a href="#core.onready" class="hash-link" aria-label="Direct link to core.onready" title="Direct link to core.onready" translate="no">​</a></h4>
<p>Emitted after the core has initially opened all its internal state.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.onclose"><strong><code>core.on(&#x27;close&#x27;)</code></strong><a href="#core.onclose" class="hash-link" aria-label="Direct link to core.onclose" title="Direct link to core.onclose" translate="no">​</a></h4>
<p>Emitted when the core has been fully closed.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.onpeer-add"><strong><code>core.on(&#x27;peer-add&#x27;)</code></strong><a href="#core.onpeer-add" class="hash-link" aria-label="Direct link to core.onpeer-add" title="Direct link to core.onpeer-add" translate="no">​</a></h4>
<p>Emitted when a new connection has been established with a peer.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="core.onpeer-remove"><strong><code>core.on(&#x27;peer-remove&#x27;)</code></strong><a href="#core.onpeer-remove" class="hash-link" aria-label="Direct link to core.onpeer-remove" title="Direct link to core.onpeer-remove" translate="no">​</a></h4>
<p>Emitted when a peer&#x27;s connection has been closed.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/references/building-blocks/hypercore.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pear-docs/references/building-blocks/hyperbee"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hyperbee</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pear-docs/references/building-blocks/hyperdht"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HyperDHT</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#api" class="table-of-contents__link toc-highlight">API</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"></div></footer></div>
</body>
</html>